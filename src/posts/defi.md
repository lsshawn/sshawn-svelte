# defi

# Rebuilding from 2022 LUNA crash

General rules:
- Diversify.
- No 21 days staking. Stay liquid.
- Have a systematic trading to be in and out of trades.
- It's okay to sell and re-enter.
- Holding cash in stable coin is still risky in crypto.

Crypto portfolio rules:
- Use relative momentum to stay in crypto or cash.
- 


# Liquidating LP

Never take a loss on the token.

Liquidate the LP with highest return.

Don't sell the token first. Use the UST of all your LPs first.

If not enough, only sell your token.

# Rewards

Use rewards into things you don't understand.

Borrowed amount should be used for cash flows, i.e. LUNA.

# LP yield

don’t go for the highest yields, I go for the ones that I really feel like the underlying is something that I could hold forever, even if the price went down. 

# Don't use ledger with DEFI

It's slowing the moving of funds.


# bLUNA vs LUNA

When you borrow LUNA, don't convert it to bLUNA if you don't need it to reduce LTV.

You'll be paying the spread between bLUNA and LUNA.

So I like having LUNA in my wallet just because if I get into a position where I have to manage that, if we were in a crash, there’s just one step that I need to do to bring my LTV way down.

# when do you move your liquid LUNA into your bLUNA vault on Anchor?

And I said, “I just look at my loan value, and I look at the value that’s in the wallet of my liquid LUNA. And when LUNA goes up in price, then the amount of liquid LUNA, the value of it is going to be more than the amount that I owe. And so whatever the difference is, I’ll take that convert it to bLUNA, add it as collateral, lower my LTV, and then I can push up my loan to value a little bit more and then buy more LUNA. And then put that in my liquid LUNA and my wallet.” 

# LUNA-UST
So because my goal is to stack LUNA this year, I’m not going to pair my LUNA with any other token that’s weaker, just because the demand for LUNA is going to be greater than any other token. So that’s the reason why I’m in LUNA-UST. I’m also in LUNA-LunaX. And I’m also in LUNA-bLUNA. But the highest yield is the LUNA-UST.

# Focus on liquidation price and LTV

# Shigeo yield farming strategy

Use bLUNA as collateral to borrow UST to invest into more LUNA.


LTV 45%: 25% in LUNA, 15% UST
35%: 20% LUNA, 15% UST
25% 15% LUNA, 10% UST

Hold more UST in earn if bearish.

1. Buy LUNA or UST in exchange
2. Send to Terrawallet
3. Download Terrastation and link Terrawallet
4. Use Terrastation to convert USDT to LUNA
5. Use Terraswap to convert LUNA to bLUNA
6. Use Anchor protocol to borrow UST with bLUNA
7. Use the borrowed UST to farm Anchor
8. Use those farmed return to buy more LUNA or buy other speculative assets

Remaining in Anchor Earn to earn 20%. 

Ape into bLUNA-LUNA LP.

Have 25% of my LUNA and then take out to 45% in UST and just park it in Anchor Earn

## Risk management

To reduce LTV, liquidate in this order:
- Anchor Earn
- LP UST
- LP underlying token

## Pay back loan

If LUNA price increases, your LTV will decrease and you'll never need to pay back loan.

# Loan to value

Less than 10% if you're experimenting so that you can take a 90% drop in price.

30% if you're in the middle.

staderlabs.com: auto-compound staked luna

Less than 40% is not efficient.

You can set your LTV in Anchor as 50%, but you don't have to put 100% collateral on Anchor unless you're going to a remote place for weeks. So your LTV in Anchor is effectively lower.

# Risk management

- Prepare for 75% correction

# Lending and borrowing

e.g. Compound for Ethereum, Anchor for Luna.

# Ethereum vs Luna?

# Risks in DEFI

- Bugs in smart contract
- Is it truly decentralised? Is there someone holding the master key?
- systemic risk caused by crypto prices
- network fees & congestion when you want to supply more collateral.

# Yield farming

Maximizing RoR by leveraging on DEFI protocols.

'Crop rotation' akin to moving funds to the bank with the highest APY.

Savings account gives 1% APY. Yield farmining can reach 100%.

1. Liquidity mining

Protocols reward users with their token for adding liquidity, on top of the yield.

2. Leverage

Deposit coins as collateral to borrow other coins. And using those borrowed coins as collateral again.

3. Risk

- Overcollaterized loans risk liquidation.
- bugs
- platforms changes
- systemic risk
- attack on liquidity pool

## Strategies

- lending & borrowing
- supplying to LP
- staking LP tokens.

# Liquidity Pools (LP)

Replaces order book model that relies on market makers in CEFI.

It's better because it's faster, cheaper, and eliminates liquidity issue.

LP are pools of token locked in a smart contract. They are used by DEXES.

## How LP works

LP holds 2 token and create a new market for the pair, e.g. DAI/ETH. LP is incentivised to supply tokens to keep the price in sync with the market price. By not supplying, price diverges and it's a loss for LPs.

In return, they earn LP tokens and fee distributed among the LP holders.

LP who wants to get back the underlying token will need to burn their LP tokens.

An 'automated market maker (AMM)' algorithm adjust the price of the pair and it's unique to each LP. Think of it as a ratio between the 2 token.

## Impermanent loss




# Oracles

Provides reliable data feeds, e.g. chain link.

# Insurance

e.g. Nexus Mutual, opyn

# Margin trading

e.g. dy/dx , fulcrum

# Derivatives

Synthetix is a decentralized platform that gives on-chain exposure to different assets.

# Decentralized exchanges (DEXES)

DEXES allows exchanging of currencies without giving up custody.

Two main types:
1. Liquidity pool based: Uniswap, kyber, balancer, bancor
2. Order book based pool: loopring, idex

# Stable coins

Tracks USD value in crpyto land: USDC, Teether.

Underneath it's still crypto and it's volatile by nature. To convert it to a stable value, there's costs:
1. Fraud risk, e.g. there's no actual USD backing the currency.
2. Counterparty risk if you're holding USDC at exchanges
3. Peg blow up risk.

## Algorithmic (DAI) vs Non-algorithmic stable coins (USDC, USDT, TAX)

Non-algos are centralised. There's a company behind them that's responsible to hold the equivalent value of stable coin in USD.

# Defi (Decentralized Finance)

Freelancing is an exit from 9-5.

Bitcoin is an exit from the Fed.

DeFi is an exit from Wall Street.

It's open to everyone without intermediaries like banks.
